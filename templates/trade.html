{% extends 'base.html' %}

{% block title %}Trade - BuyHigh.io{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
  <h1 class="text-2xl font-pixel text-primary-light dark:text-primary-dark mb-6 text-center">AKTIEN-ARENA</h1>

  <div class="flex flex-col lg:flex-row gap-6">
    <!-- Linke Spalte: Aktienliste und Suche -->
    <div class="w-full lg:w-1/3 bg-white dark:bg-gray-800 shadow-pixel border-4 border-game-blue rounded-lg p-4">
      <!-- Suchleiste -->
      <div class="mb-4 relative">
        <label for="stock-search" class="text-xs font-pixel text-gray-600 dark:text-gray-400 mb-1 block">SUCHE:</label>
        <input type="search" id="stock-search" placeholder="z.B. AAPL, S&P 500..." 
               class="w-full p-2 border-2 border-gray-300 dark:border-gray-600 rounded font-pixel text-sm dark:bg-gray-700 dark:text-white focus:border-game-blue focus:outline-none">
      </div>

      <!-- Aktienliste -->
      <div id="stock-list" class="space-y-2 max-h-[500px] overflow-y-auto pr-1">
        <!-- Aktie 1 -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="SPY" data-name="S&P 500 SPDR ETF" data-price="450.05" data-change="+0.50">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">S&P 500 ETF</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">SPY</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$450.05</p>
              <p class="font-pixel text-xxs text-game-green">+0.50%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[30%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[80%] bg-game-green"></div>
            </div>
          </div>
        </div>
        
        <!-- Aktie 2 -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="AAPL" data-name="Apple Inc." data-price="175.20" data-change="-0.20">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Apple Inc.</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">AAPL</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$175.20</p>
              <p class="font-pixel text-xxs text-game-red">-0.20%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[70%] bg-game-red"></div>
              <div class="w-1/6 h-[60%] bg-game-red"></div>
              <div class="w-1/6 h-[80%] bg-game-red"></div>
              <div class="w-1/6 h-[50%] bg-game-red"></div>
              <div class="w-1/6 h-[40%] bg-game-red"></div>
              <div class="w-1/6 h-[30%] bg-game-red"></div>
            </div>
          </div>
        </div>
        
        <!-- Aktie 3 -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="TSLA" data-name="Tesla Inc." data-price="250.75" data-change="+1.20">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Tesla Inc.</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">TSLA</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$250.75</p>
              <p class="font-pixel text-xxs text-game-green">+1.20%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[20%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
              <div class="w-1/6 h-[30%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
            </div>
          </div>
        </div>
        
        <!-- Microsoft Corp. -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="MSFT" data-name="Microsoft Corporation" data-price="330.10" data-change="+0.85">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Microsoft Corp.</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">MSFT</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$330.10</p>
              <p class="font-pixel text-xxs text-game-green">+0.85%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[40%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
            </div>
          </div>
        </div>
        
        <!-- Amazon.com Inc. -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="AMZN" data-name="Amazon.com Inc." data-price="130.50" data-change="-1.10">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Amazon.com Inc.</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">AMZN</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$130.50</p>
              <p class="font-pixel text-xxs text-game-red">-1.10%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[60%] bg-game-red"></div>
              <div class="w-1/6 h-[50%] bg-game-red"></div>
              <div class="w-1/6 h-[70%] bg-game-red"></div>
              <div class="w-1/6 h-[40%] bg-game-red"></div>
              <div class="w-1/6 h-[30%] bg-game-red"></div>
              <div class="w-1/6 h-[20%] bg-game-red"></div>
            </div>
          </div>
        </div>
        
        <!-- Alphabet Inc. -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="GOOGL" data-name="Alphabet Inc." data-price="140.20" data-change="+0.65">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Alphabet Inc.</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">GOOGL</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$140.20</p>
              <p class="font-pixel text-xxs text-game-green">+0.65%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
            </div>
          </div>
        </div>
        
        <!-- Meta Platforms -->
        <div class="stock-item p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors" data-symbol="META" data-name="Meta Platforms Inc." data-price="295.40" data-change="+1.50">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Meta Platforms</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">META</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$295.40</p>
              <p class="font-pixel text-xxs text-game-green">+1.50%</p>
            </div>
          </div>
          <!-- Miniature pixel graph -->
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
            </div>
          </div>
        </div>

        <!-- Versteckte Aktien/Indizes (nur sichtbar bei Suche) -->
        <div class="stock-item hidden p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors"
             data-symbol="NVDA" data-name="NVIDIA Corporation" data-price="900.00" data-change="+2.10">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">NVIDIA Corporation</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">NVDA</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$900.00</p>
              <p class="font-pixel text-xxs text-game-green">+2.10%</p>
            </div>
          </div>
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
            </div>
          </div>
        </div>
        <div class="stock-item hidden p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors"
             data-symbol="NFLX" data-name="Netflix Inc." data-price="600.00" data-change="-0.80">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Netflix Inc.</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">NFLX</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$600.00</p>
              <p class="font-pixel text-xxs text-game-red">-0.80%</p>
            </div>
          </div>
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[40%] bg-game-red"></div>
              <div class="w-1/6 h-[30%] bg-game-red"></div>
              <div class="w-1/6 h-[60%] bg-game-red"></div>
              <div class="w-1/6 h-[50%] bg-game-red"></div>
              <div class="w-1/6 h-[70%] bg-game-red"></div>
              <div class="w-1/6 h-[20%] bg-game-red"></div>
            </div>
          </div>
        </div>
        <div class="stock-item hidden p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors"
             data-symbol="DAX" data-name="DAX Index" data-price="18000.00" data-change="+0.30">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">DAX Index</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">DAX</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$18000.00</p>
              <p class="font-pixel text-xxs text-game-green">+0.30%</p>
            </div>
          </div>
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
            </div>
          </div>
        </div>
        <div class="stock-item hidden p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors"
             data-symbol="BTCUSD" data-name="Bitcoin / USD" data-price="65000.00" data-change="+3.00">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Bitcoin / USD</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">BTCUSD</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$65000.00</p>
              <p class="font-pixel text-xxs text-game-green">+3.00%</p>
            </div>
          </div>
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[90%] bg-game-green"></div>
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
            </div>
          </div>
        </div>
        <div class="stock-item hidden p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border-2 border-gray-200 dark:border-gray-700 transition-colors"
             data-symbol="ETHUSD" data-name="Ethereum / USD" data-price="3200.00" data-change="+2.50">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">Ethereum / USD</p>
              <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">ETHUSD</p>
            </div>
            <div class="text-right">
              <p class="font-pixel text-xs text-gray-800 dark:text-gray-200">$3200.00</p>
              <p class="font-pixel text-xxs text-game-green">+2.50%</p>
            </div>
          </div>
          <div class="w-full h-4 bg-gray-100 dark:bg-gray-700 mt-2 rounded-sm overflow-hidden">
            <div class="h-full flex items-end">
              <div class="w-1/6 h-[80%] bg-game-green"></div>
              <div class="w-1/6 h-[60%] bg-game-green"></div>
              <div class="w-1/6 h-[90%] bg-game-green"></div>
              <div class="w-1/6 h-[70%] bg-game-green"></div>
              <div class="w-1/6 h-[50%] bg-game-green"></div>
              <div class="w-1/6 h-[40%] bg-game-green"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Rechte Spalte: Graph und Handelsaktionen -->
    <div class="w-full lg:w-2/3 bg-white dark:bg-gray-800 shadow-pixel border-4 border-primary-light rounded-lg p-4">
      <div class="mb-4">
        <h2 id="stock-name" class="text-xl font-pixel text-primary-light dark:text-primary-dark">S&P 500 ETF (SPY)</h2>
        <p id="stock-price" class="font-pixel text-xs text-gray-600 dark:text-gray-400">Preis: $450.05 (+0.50%)</p>
      </div>
      
      <!-- Candlestick Chart Container -->
      <div id="candlestick-chart" class="bg-gray-100 dark:bg-gray-700 h-64 md:h-80 rounded border-2 border-gray-200 dark:border-gray-600 mb-6 overflow-hidden relative">
        <!-- Chart will be rendered here -->
      </div>

      <!-- Timeframe Selection -->
      <div class="mb-6 flex flex-wrap gap-2 justify-center">
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded border-2 border-gray-300 dark:border-gray-600 hover:bg-primary-light hover:text-white hover:border-primary-light dark:hover:bg-primary-dark" data-timeframe="1MIN">1MIN</button>
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded border-2 border-gray-300 dark:border-gray-600 hover:bg-primary-light hover:text-white hover:border-primary-light dark:hover:bg-primary-dark" data-timeframe="1W">1W</button>
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded border-2 border-gray-300 dark:border-gray-600 hover:bg-primary-light hover:text-white hover:border-primary-light dark:hover:bg-primary-dark" data-timeframe="1M">1M</button>
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-primary-light dark:bg-primary-dark text-white rounded border-2 border-primary-light dark:border-primary-dark" data-timeframe="3M">3M</button>
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded border-2 border-gray-300 dark:border-gray-600 hover:bg-primary-light hover:text-white hover:border-primary-light dark:hover:bg-primary-dark" data-timeframe="6M">6M</button>
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded border-2 border-gray-300 dark:border-gray-600 hover:bg-primary-light hover:text-white hover:border-primary-light dark:hover:bg-primary-dark" data-timeframe="1Y">1Y</button>
        <button class="timeframe-btn font-pixel text-xs px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded border-2 border-gray-300 dark:border-gray-600 hover:bg-primary-light hover:text-white hover:border-primary-light dark:hover:bg-primary-dark" data-timeframe="ALL">ALL</button>
      </div>

      <!-- Handelsaktionen -->
      <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border-2 border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-pixel text-primary-light dark:text-primary-dark mb-4">TRADE AUSFÜHREN</h3>
        
        <div class="mb-2">
            <p class="text-xs font-pixel text-gray-700 dark:text-gray-300">DEIN GUTHABEN: 
                <span id="user-balance" class="text-primary-light dark:text-primary-dark font-bold">€0.00</span>
            </p>
        </div>

        <form id="trade-form" class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label for="quantity" class="block text-xs font-pixel text-gray-700 dark:text-gray-300 mb-1">MENGE:</label>
              <input type="number" id="quantity" name="quantity" value="1" min="1"
                     class="w-full p-2 border-2 border-gray-300 dark:border-gray-600 rounded font-pixel text-sm dark:bg-gray-700 dark:text-white">
            </div>
            <div>
              <label for="price" class="block text-xs font-pixel text-gray-700 dark:text-gray-300 mb-1">PREIS:</label>
              <div id="current-price" class="w-full p-2 border-2 border-gray-300 dark:border-gray-600 rounded font-pixel text-sm dark:bg-gray-700 dark:text-white">
                $450.05
              </div>
            </div>
          </div>
          
          <div class="flex items-center justify-between">
            <div>
              <p class="text-xs font-pixel text-gray-700 dark:text-gray-300">TOTAL:</p>
              <p id="total-price" class="text-lg font-pixel text-primary-light dark:text-primary-dark">$450.05</p>
            </div>
            <div>
              <p class="text-xs font-pixel text-gray-700 dark:text-gray-300">MÖGLICHER GEWINN:</p>
              <div class="flex space-x-2">
                <span id="potential-gain" class="text-xs font-pixel text-game-green">+$4.50</span>
                <span id="potential-gain-percent" class="text-xs font-pixel text-game-green">(+1%)</span>
              </div>
            </div>
          </div>
          
          <div class="flex space-x-4 pt-2">
            <button type="button" id="buy-button"
                    class="flex-1 py-3 px-4 bg-game-green border-b-4 border-green-700 text-white font-pixel text-sm rounded hover:bg-green-600 focus:outline-none focus:border-b-2 focus:translate-y-0.5 transform transition-all">
              KAUFEN
            </button>
            <button type="button" id="sell-button"
                    class="flex-1 py-3 px-4 bg-game-red border-b-4 border-red-700 text-white font-pixel text-sm rounded hover:bg-red-600 focus:outline-none focus:border-b-2 focus:translate-y-0.5 transform transition-all">
              VERKAUFEN
            </button>
          </div>
        </form>
      </div>
      
      <!-- Game-Inspired Stats -->
      <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-2">
        <div class="bg-gray-100 dark:bg-gray-900 p-2 rounded border-2 border-gray-200 dark:border-gray-700 text-center">
          <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">VOLUME</p>
          <p id="stock-volume" class="font-pixel text-xs text-gray-700 dark:text-gray-300">1.2M</p>
        </div>
        <div class="bg-gray-100 dark:bg-gray-900 p-2 rounded border-2 border-gray-200 dark:border-gray-700 text-center">
          <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">HIGH</p>
          <p id="stock-high" class="font-pixel text-xs text-gray-700 dark:text-gray-300">$452.75</p>
        </div>
        <div class="bg-gray-100 dark:bg-gray-900 p-2 rounded border-2 border-gray-200 dark:border-gray-700 text-center">
          <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">LOW</p>
          <p id="stock-low" class="font-pixel text-xs text-gray-700 dark:text-gray-300">$448.25</p>
        </div>
        <div class="bg-gray-100 dark:bg-gray-900 p-2 rounded border-2 border-gray-200 dark:border-gray-700 text-center">
          <p class="font-pixel text-xxs text-gray-500 dark:text-gray-400">MARKET CAP</p>
          <p id="stock-market-cap" class="font-pixel text-xs text-gray-700 dark:text-gray-300">$40.3T</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ApexCharts zuerst laden, dann trade.js -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script src="/static/js/trade.js"></script>
<script>
  // Suchfunktion für die Aktienliste
  document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('stock-search');
    const stockItems = document.querySelectorAll('.stock-item');

    searchInput.addEventListener('input', function() {
      const query = this.value.trim().toLowerCase();
      stockItems.forEach(item => {
        const name = item.getAttribute('data-name')?.toLowerCase() || '';
        const symbol = item.getAttribute('data-symbol')?.toLowerCase() || '';
        // Zeige Item, wenn Suche passt, sonst verstecken
        if (query && (name.includes(query) || symbol.includes(query))) {
          item.classList.remove('hidden');
          item.style.display = '';
        } else if (!query && !item.classList.contains('hidden')) {
          // Standard: sichtbare Items bleiben sichtbar
          item.style.display = '';
        } else if (!query && item.classList.contains('hidden')) {
          // Standard: versteckte Items bleiben versteckt
          item.style.display = 'none';
        } else {
          // Wenn Suche nicht passt, verstecke das Item
          item.style.display = 'none';
        }
      });
    });
  });
</script>
{% endblock %}
